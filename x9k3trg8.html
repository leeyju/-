<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>응급 환자 확인</title>
  <script>
    // 코드 확인 후 Google Form으로 전송하고 환자 페이지로 이동
    function submitInfo(event) {
      event.preventDefault(); // 폼이 새로고침 되는 걸 막음

      const code = document.getElementById("code").value;
      const org = document.getElementById("org").value;
      const name = document.getElementById("name").value;
      const gender = document.getElementById("gender").value;
      const age = document.getElementById("age").value;

      // 코드와 환자 페이지 연결
      const pages = {
        "0923": "https://leeyju.github.io/patient-info/patient1.html",
        "1127": "https://leeyju.github.io/patient-info/patient3.html",
        "0216": "https://leeyju.github.io/patient-info/Patient4.html",
        "0915": "https://leeyju.github.io/patient-info/Patient5.html",
        "0611": "https://leeyju.github.io/patient-info/Patient6.html",
        "0908": "https://leeyju.github.io/patient-info/Patient7.html"
      };

      if (!pages[code]) {
        alert("잘못된 식별코드예요.");
        return;
      }

      // Google Form으로 정보 전송
      const formUrl = "https://docs.google.com/forms/d/e/1FAIpQLSfA9MyCF3AloKtzHwEFnyxfXLhHBx7tIpNxK0vGBYdaWL4ltQ/formResponse";
      const data = new FormData();
      data.append("entry.866977490", org);
      data.append("entry.2090662080", name);
      data.append("entry.30391193", gender);
      data.append("entry.1769811738", age);

      fetch(formUrl, {
        method: "POST",
        mode: "no-cors",
        body: data
      }).then(() => {
        window.location.href = pages[code]; // 환자 페이지로 이동
      }).catch(() => {
        alert("정보 전송에 문제가 있어요.");
      });
    }
  </script>
</head>
<body>
  <h2>응급환자 확인</h2>
  <form onsubmit="submitInfo(event)">
    <p><input id="code" type="text" placeholder="개인 식별코드" required></p>
    <p><input id="org" type="text" placeholder="소속기관" required></p>
    <p><input id="name" type="text" placeholder="이름" required></p>
    <p><input id="gender" type="text" placeholder="성별" required></p>
    <p><input id="age" type="text" placeholder="나이" required></p>
    <button type="submit">확인</button>
  </form>
</body>
</html>